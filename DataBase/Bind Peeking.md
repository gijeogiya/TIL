# Bind Peeking
> Oracle Database
## 뇌동매매(雷同賣買) 그리고 바인드피킹으로 인한 실행 계획 변경
- 뇌동매매란 투자자 자신의 의견이 아닌 다른 투자자의 의견이나 시장 인기에 편승해서 주식을 거래하는 어리석은 행위를 말한다. (이게
나다)
- 잘못된 다수의 요청(DDoS)은 자원을 고갈 시킬 뿐만 아니라 최적화된 기능 계획을 변경 시킬 위험이 있다.
- 때문에 잘못된 요청을 어플리케이션단에서 미리 감지 차단하는 것이 중요하며 힌트절을 활용하여 잘못된 실행 계획을 바로 잡아야한다.
## Bind Peeking
- Bind Peeking이란 바인드 변수를 사용하는 경우 쿼리가 최초로 실행되는 시점의 실제 바인드 값을 이용해서(Peeking해서) 실행 계획을 세우는 것을 의미한다
- 바인드 변수를 사용하는 경우 실제로 실행되는 시점에 어떤 값이 들어오는지 알 수 없기 때문에 컬럼의 평균적인 분포만을 가지고 비용을 계산하게 되고 이는 데이터는 변화한다는 가정이 들어간다면 치명적인 단점을 가지게 된다.
- 분포도가 한쪽으로 극단적으로 치우치더라도 바인드 변수를 사용하면 어떤 값이 올 지 모르기 때문에 평균적인 분포를 따르게 되고 그래서 바인드 피킹은 이런 단점을 피하기 위해 쿼리가 최초 실행되는 시점에 바인트 변수에 들어온 값을 이용하게 된다
- 즉 Full table scan이 필요할때는 그것을 아니면 Index scan을 사용할 때는 그것을 사용할 수 있게 오라클이 판단할 수 있는 histogram이 반드시 존재해야 하며바인드 피킹은 적절한 histogram의 생성 여부에 따라 정상적으로 기능이 작동되는지가 결정된다.