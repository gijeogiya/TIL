# 사용자 인증기반 관계형 DB 설계

2022.04.15

## 느낀 점

django의 MCV패턴 속에 기능들이 더 해질 수록 코드가 헤비해 질 줄 알았다. 하지만 django가 지원하는 ModelForm, Admin, Authentication 등의 기능들을 내장하고 있어서 오히려 django가 추구하는 방식의 패턴을 따라간다면 오히려 코드량은 적어지는 것 같다. 이것이 프레임워크의 장점인 것 같다. 사용자 인증 기반으로 DB를 설계하니 자주 사용하는 SNS이 계속 생각났고 새로운 서비스를 만들 수도 있겠다는 긍정적인 생각을 하게 되었다.



## 1. Django 를 활용한 웹 서버 구성: Authentication, many to one relationship

### 어려웠던 점

- 인증을 위한 Authentication 기능을 잘 이해하고 있어야하는데 그것을 설계하는 것이 힘들었다. 혜림님과 교재 코드의 절대적인 도움을 받았다. 그래도 내 손으로 혹은 혜림님의 설명과 함께 작성해 볼 수 있어서 전반적인 흐름을 이해하는데 도움이 되었다.

- 이번 프로젝트에서 가장 어려웠던 점은 Model 구성 -> ModelForm 구성 부분과 views.py에서 어느 부분에 authentication을 확인하는 것이 맞는지였다. 



### 해결방안

- django의 디버깅 창이 굉장히 도움이 된다. 역시 django는 매우 정교하게 잘 만들어진 프레임워크다.

- 큰 흐름을 정확히 잡고 가기 위해서 무엇보다 순서를 명확히 하고 각 단계별로 꼼꼼히 내용을 확인했다. 처음에 `User`를 정의하고, `Model`을 생성하고, `ModelForm`을 생성한 뒤, Views를 작성함으로써 html 페이지를 보고 변경하는 일이 없게 잘 작성해갔다. 파트너와 같이 체크를 하면서 오타 등의 실수들도 줄일 수 있었다.



## 2. 웹 페이지 마크업

### 어려웠던 점

- 부트스트랩 적용과 같은 디자인에 관한 것은 정답이 없기 때문에 협업이 꽤나 까다롭다는 것을 알았다.

- 부트스트랩이 적용되는 방식을 공부한지 오래되어 이것저것 넣어보고 되네?하는 방식으로 적용한 것이 불안정했다.

- 내비게이션 바를 생성했는데, input 태그인 아이들만 형식이 달라 통일감이 많이 떨어져 보였다.

- `index.html`과 `detail.html`에서 게시글이 전체 페이지에 틱 던져있는게 게시글 처럼 보이지 않았다.

- 댓글 삭제 버튼이 너무 크고, 댓글의 아래에 작성이 되어 보기 불편했다.



### 해결방안

- 클래스를 이용하여 스타일을 넣는 이유가 바로 협업과 통일성을 위해서 그런 것이 아닐까 생각했다. 제대로 개발하는 경우에는 디자인에 관한 규정을 정하여 그에 맞는 클래스들을 미리 구성하고 적용하는 방식을 채택해야 할 것 같다.

- bootstrap의 class를 적용해 너무 튀는 형태를 고치기는 했지만, 버튼 형태의 모양을 수정할 수는 없었다. `<a> tag`로 변경을 하면 form이 아닌 `<a>`에 입력된 링크로 이동해 버리고, `<p> tag`는 누를 수 있는 버튼으로 생성이 되지 않아서 `input` 태그를 유지할 수 밖에 없었다. 가장 아쉬운 부분이라고 생각한다.

- 명세에서는 단순히 게시글의 제목과 내용을 출력하면 되는 형태로 주어졌지만, 게시판처럼 보이면서 게시글과 관련된 버튼을 같이 담고 싶었다. 그래서 bootstrap의 card와 list-group을 사용했다. 

- 댓글 삭제 버튼의 사이즈를 `btn-sm`을 지정해서 크기를 줄였고, 면적이 채워지지 않고 선으로만 구성된 버튼으로 변경했다. 최종적으로 댓글이 좌측부터 보이고 삭제 버튼이 글의 바로 옆에 위치하도록 하는 것은 `d-flex` 적용으로 구현할 수 있었다. 여전히 버튼의 크기가 커서 조금 아쉽기는 하지만, 전체적인 형태가 실제 댓글란과 비슷해져서 다행이었다.

