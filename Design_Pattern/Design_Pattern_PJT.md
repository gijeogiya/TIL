# 공공데이터 오픈API를 활용한 독서 스터디 플랫폼 개발 회고
## 스터디 생성/조회 기능 설계
### 설계 시 고민한것
- 쿠링 메인 서비스 기능은 공지사항 조회 기능에서 학교 홈페이지를 스크랩하여 가져오는 형태였다. 학교 홈페이지 게시물이 늦게 로드되는 경우가 많았는데 이때마다 Time Out이 발생하여 쿠링 서버가 지속적으로 다운되는 문제점이 있었다. 이러한 경험을 바탕으로 타서비스와의 의존관계를 적절히 정의하여 설계하는 것이 중요하다는 것을 깨달은 바 있다.
- 도서 정보를 조회 할 때 마다 공공도서정보 오픈API를 호출하게 될 경우, 서비스의 메인 기능들이 해당 API에 대한 의존성이 너무 커질 것 같았다.
- 모든 도서 정보를 서비스의 DB에 가지고 있기에는 DB자원에 무리가 있었다.
### 설계
- 서비스 내 독서 스터디를 지닌 도서에 한하여 서비스 DB에 도서 정보를 저장했다.
- 서비스 내 독서 스터디를 지니지 않은 도서를 조회하는 경우 도서 객체를 생성하지 않고 오픈API 조회를 통해 가상의 도서 객체를 제공했다.
- 공공도서정보 오픈API에 조회 요청을 보내기 전에 서비스 DB의 도서 정보 테이블을 확인하는 구조로 설계했다.
### 강점
- 오픈API 서버가 다운되는 등 통신이 두절되어도 기존에 생성된 스터디 기능은 문제없이 지속 제공 가능하다.
### 약점
- 새로운 도서에 대한 스터디와 스터디원 생성 등의 트래픽이 증가하는 경우 조회 프록시 프로세스가 복잡하여 성능 하락의 문제가 생길 수 있다.
### 느낀점
- 통합회원제는 보안적으로 이점이 많지만, 다양한 제휴사 서비스들의 핵심적인 회원에 관한 기능이 통합회원제에 의존한다는 것은 커다란 문제점이 될 수도 있겠다는 생각을 했다.
- 통합회원제에게 고가용성은 매우 중요하며 그것을 위해 선배 개발자분들이 많은 노력을 했을 것 같다는 생각을 했다.
- 통합회원제의 의존성을 줄이기 위해 헬스체크, 독립회원제 등 제휴사 서비스에서도 다양한 방법으로 장치를 마련했놓았을 것 같다.
### 관련한 디자인 패턴: 프록시 패턴(Proxy Pattern)
프록시(Proxy)를 번역하면 대리자, 대변인의 의미를 갖고 있다. 대리자, 대변인은 누군가를 대신해서 그 역할을 수행하는 존재이다. 이는 프로그램에도 똑같이 적용된다. 즉, 프록시에게 어떤 일을 대신 시키는 것이다.

어떤 객체를 사용하고자 할때, 객체를 직접적으로 참조하는 것이 아닌 해당 객체를 대항하는 객체를 통해 대상 객체에 접근하는 방식을 사용하면 해당 객체가 메모리에 존재하지 않아도 기본적인 정보를 참조하거나 설정할 수 있고, 실제 객체의 기능이 필요한 시점까지 객체의 생성을 미룰 수 있다.

![image](https://github.com/gijeogiya/TIL/assets/97646078/08b81557-3636-467f-8292-4271c5440349)

#### 프록시 패턴의 장단점

##### 프록시패턴 장점
- 사이즈가 큰 객체가 로딩되기 전에도 프록시를 통해 참조를 할 수 있다.
- 실제 객체의 public, protected 메소드를 숨기고 인터페이스를 통해 노출시킬 수 있다.
- 로컬에 있지 않고 떨어져있는 객체를 사용할 수 있다.
- 원래 객체에 접근에 대해 사전처리를 할 수 있다.

##### 프록시패턴 단점
- 객체를 생성할 때 한 단계를 거치게 되므로, 빈번한 객체 생성이 필요한 경우 성능이 저하될 수 있다.
- 프록시 내부에서 객체 생성을 위해 스레드가 생성, 동기화가 구현되어야 하는 경우 성능이 저하될 수 있다.
- 로직이 난해해져 가독성이 떨어질 수 있다.

#### 프록시 패턴의 종류

##### 가상프록시
- 꼭 필요로 하는 시점까지 객체의 생성을 연기하고, 해당 객체가 생성된 것 처럼 동작하도록 만들고 싶을 때 사용하는 패턴이다.
- 프록시 클래스에서 작은 단위의 작업을 처리하고 리소스가 많이 요구되는 작업들이 필요할 경우만 주체 클래스를 사용하도록 구현한다.
- 예: 가치읽기

##### 원격프록시
- 원격 객체에 대한 접근을 제어 로컬 환경에 존재하며, 원격 객체에 대한 대변자 역할을 하는 객체 서로 다른 주소 공간에 있는 객체에 대해 마치 같은 주소 공간에 있는 것 처럼 동작하게 하는 패턴이다.
- 예: Google Docs

##### 보호프록시
- 주체 클래스에 대한 접근을 제어하기 위한 경우에 객체에 대한 접근 권한을 제어하거나 객체마다 접근 권한을 달리하고 싶을 경우 사용하는 패턴으로 프록시 클래스에서 클라이언트가 주체 클래스에 대한 접근을 허용할지 말지 결정하도록 할 수 있다.
- 예: 프록시 서버
